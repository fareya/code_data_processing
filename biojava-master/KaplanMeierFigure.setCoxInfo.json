{"callee_method_ids":[3605,3515,3520,3524,3520,3615,3535,3536,3537,3538],"callee_method_names":["CoxInfo.getSurvivalInfoList","StrataInfo.getOriginalMetaData","LinkedHashMap<String,String>.get","LinkedHashMap<String, ArrayList<CensorStatus>>.get","LinkedHashMap<String, ArrayList<CensorStatus>>.put","StrataInfo.getTime","StrataInfo.getStatus","StrataInfo.getWeight","ArrayList<CensorStatus>.add","StrataInfo.getStatus","CoxInfo.getCoefficient","CoxCoefficient.getHazardRatio","CoxCoefficient.getHazardRatioLoCI","CoxCoefficient.getHazardRatioHiCI","CoxCoefficient.getPvalue","ArrayList<String>.add","ArrayList<String>.add","ArrayList<String>.add"],"method_name":"KaplanMeierFigure.setCoxInfo","method_implementation":"{\n    LinkedHashMap<String, ArrayList<CensorStatus>> survivalData = new LinkedHashMap<String, ArrayList<CensorStatus>>();\n    ArrayList<SurvivalInfo> siList = ci.getSurvivalInfoList();\n    int n = 0;\n    int event = 0;\n    for (SurvivalInfo si : siList) {\n        String strata = si.getOriginalMetaData(strataVariable);\n        String legend = legendMap.get(strata);\n        if (legend == null) {\n            legend = strata;\n        }\n        ArrayList<CensorStatus> censorStatusList = survivalData.get(legend);\n        if (censorStatusList == null) {\n            censorStatusList = new ArrayList<CensorStatus>();\n            survivalData.put(legend, censorStatusList);\n        }\n        CensorStatus cs = new CensorStatus(strata, si.getTime(), si.getStatus() + \"\");\n        cs.weight = si.getWeight();\n        censorStatusList.add(cs);\n        n++;\n        if (si.getStatus() == 1) {\n            event++;\n        }\n    }\n    setSurvivalData(title, survivalData, useWeighted);\n    CoxCoefficient cc = ci.getCoefficient(strataVariable);\n    //DecimalFormat df = new DecimalFormat(\"#.##\");\n    String line1 = \"HR=\" + fmt(cc.getHazardRatio(), 2, 0) + \" (CI:\" + fmt(cc.getHazardRatioLoCI(), 2, 0) + \"-\" + fmt(cc.getHazardRatioHiCI(), 2, 0) + \")\";\n    String line2 = \"p=\" + fmt(cc.getPvalue(), 3, 0);\n    // String line2 = \"logrank P=\" + fmt(ci.getScoreLogrankTestpvalue(), 3, 0);\n    String line3 = \"n=\" + n + \" events=\" + event;\n    //        System.out.println(\"setCoxInfo=\" + cc.pvalue + \" \" + title);\n    ArrayList<String> lines = new ArrayList<String>();\n    lines.add(line1);\n    lines.add(line2);\n    lines.add(line3);\n    setFigureLineInfo(lines);\n}","repo_id":"9","comment":"/**\n * @param title Title of figures\n * @param ci\n * @param strataVariable The column that based on value will do a figure\n * line\n * @param legendMap Map the value in the column to something readable\n * @param useWeighted\n * @throws Exception\n */\n","repo_name":"biojava-master/","id":3790,"method_signature":"void setCoxInfo(ArrayList, CoxInfo, String, LinkedHashMap, Boolean)"}