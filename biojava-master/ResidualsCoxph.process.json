{"callee_method_ids":[3609,3609,3607,3611],"callee_method_names":["CoxInfo.getNaiveVariance","CoxInfo.getNaiveVariance","CoxInfo.getVariance","CoxInfo.getWeighted","ArrayList<String>.size"],"method_name":"ResidualsCoxph.process","method_implementation":"{\n    Type otype = type;\n    if (type == Type.dfbeta || type == Type.dfbetas) {\n        type = Type.score;\n        //if missing weighted is a required so never missing\n    }\n    //64 2 625 310\n    double[][] rr = null;\n    if (type == Type.score) {\n        rr = CoxScore.process(ci.method, ci.survivalInfoList, ci, false);\n    }\n    //debug\n    //        if (false) {\n    //            for (int i = 0; i < ci.survivalInfoList.size(); i++) {\n    //                SurvivalInfo si = ci.survivalInfoList.get(i);\n    //                System.out.print(\"residuals \" + si.getOrder() + \" \" + si.getClusterValue());\n    //                for (int j = 0; j < 2; j++) {\n    //                    System.out.print(\" \" + rr[i][j]);\n    //                }\n    //                System.out.println();\n    //            }\n    //        }\n    double[][] vv = null;\n    if (ci.getNaiveVariance() != null) {\n        vv = ci.getNaiveVariance();\n    } else {\n        vv = ci.getVariance();\n    }\n    if (otype == Type.dfbeta) {\n        //rr <- rr %*% vv\n        rr = Matrix.multiply(rr, vv);\n    } else if (otype == Type.dfbetas) {\n        //rr <- (rr %*% vv) %*% diag(sqrt(1/diag(vv)))\n        double[][] d1 = Matrix.multiply(rr, vv);\n        double[][] d2 = Matrix.diag(Matrix.sqrt(Matrix.oneDivide(Matrix.diag(vv))));\n        rr = Matrix.multiply(d1, d2);\n    }\n    if (useWeighted) {\n        double[] weighted = ci.getWeighted();\n        rr = Matrix.scale(rr, weighted);\n    }\n    if (cluster != null && cluster.size() > 0) {\n        rr = rowsum(rr, cluster);\n    }\n    return rr;\n}","repo_id":"9","comment":"/**\n * @param ci\n * @param type\n * @param useWeighted\n * @param cluster\n * @return\n * @throws Exception\n */\n","repo_name":"biojava-master/","id":3602,"method_signature":"double[][] process(CoxInfo, Type, boolean, ArrayList)"}