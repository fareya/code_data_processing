{"callee_method_names":["String.toUpperCase","ChemicalComponentDictionary.getChemComp","Logger.warn","int.getMessage","Logger.warn","ChemCompProvider.getChemComp"],"method_name":"DownloadChemCompProvider.getChemComp","method_implementation":"{\n    // make sure we work with upper case records\n    recordName = recordName.toUpperCase().trim();\n    boolean haveFile = true;\n    if (\"?\".equals(recordName)) {\n        return null;\n    }\n    if (fileIsAbsent(recordName)) {\n        // check if we should install all components\n        checkDoFirstInstall();\n    }\n    if (fileIsAbsent(recordName)) {\n        // we previously have installed already the definitions,\n        // just do an incrememntal update\n        haveFile = downloadChemCompRecord(recordName);\n    }\n    // Added check that download was successful and chemical component is available.\n    if (haveFile) {\n        String filename = getLocalFileName(recordName);\n        try {\n            ChemComp chemComp;\n            try {\n                ChemicalComponentDictionary dict = ChemCompConverter.fromPath(Paths.get(filename));\n                chemComp = dict.getChemComp(recordName);\n            } catch (ParsingException e) {\n                // happens for corrupt files\n                chemComp = null;\n            }\n            // May be null if the file was corrupt. Fall back on ReducedChemCompProvider in that case\n            if (chemComp != null) {\n                return chemComp;\n            }\n        } catch (IOException e) {\n            logger.warn(\"Could not download chemical component file {} for {}. Error: {}. Now trying to use the \" + \"local chemical component definitions.\", filename, recordName, e.getMessage());\n        }\n    }\n    // see https://github.com/biojava/biojava/issues/315\n    // probably a network error happened. Try to use the ReducedChemCOmpProvider\n    if (fallback == null) {\n        fallback = new ReducedChemCompProvider();\n    }\n    logger.warn(\"Falling back to ReducedChemCompProvider for {}. This could indicate a network error.\", recordName);\n    return fallback.getChemComp(recordName);\n}","repo_id":"9","comment":"/**\n * Loads the definitions for this {@link ChemComp} from a local file and instantiates a new object.\n *\n * @param recordName the ID of the {@link ChemComp}\n * @return a new {@link ChemComp} definition.\n */\n","repo_name":"biojava-master/","id":1097,"method_signature":"ChemComp getChemComp(String)"}