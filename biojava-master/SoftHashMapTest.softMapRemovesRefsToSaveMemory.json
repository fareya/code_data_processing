{"callee_method_names":["Map<String, TestObject>.put","TestObject.getName"],"method_name":"SoftHashMapTest.softMapRemovesRefsToSaveMemory","method_implementation":"{\n    // Using a regular Map with hard references will probably\n    // cause an OOM error if running with -Xmx=5M. Uncomment this\n    // and comment out the next line to observe this.\n    // Map<String, TestObject> map =new HashMap<>(1);\n    // set the maximum number of hard references to 1 (minimum)\n    // to expose behaviour of soft references better.\n    Map<String, TestObject> map = new SoftHashMap<>(1);\n    int totalPuts = 5;\n    for (int i = 0; i < totalPuts; i++) {\n        TestObject myObject = TestObject.large(\"\" + i);\n        map.put(myObject.getName(), myObject);\n        //allocate a little slowly\n        // enables GC time to work\n        Thread.sleep(10);\n    }\n    int nonNullValues = countNonNullMapReferences(map, totalPuts);\n    // some but not all references should be removed.\n    assertTrue(nonNullValues > 0 && nonNullValues < totalPuts);\n}","repo_id":"9","comment":"// OOM errors during normal test execution so this is disabled\n","repo_name":"biojava-master/","id":3213,"method_signature":"void softMapRemovesRefsToSaveMemory()"}